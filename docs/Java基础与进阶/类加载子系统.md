### 类加载子系统是什么

类加载子系统是JVM虚拟机中负责从文件系统或者网络中加载Class文件，class文件在文件开头有特定的文件标识

ClassLoader只负责class文件的加载，至于它是否可以运行，则由ExecutionEngine执行引擎决定

### 类加载器是怎么工作的

首先类加载器分为三个阶段

- 加载阶段
  - 引导类加载器
    - 加载核心类库
  - 扩展类加载器
    - jre/lib/ext目录下的被此加载器加载
  - 系统类加载器
    - 自定义类加载
- 链接阶段
  - 验证
  - 准备
  - 解析
- 初始化阶段

### 类的加载过程

- 加载
  - 通过一个类的全限定名获取定义此类的二进制字节流
  - 将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构
  - 在内存中生成一个代表这个类的java.lang.Class对象，作为方法去这个类的各种数据的访问入口

- 链接
  - 验证
    - 确保Class文件的字节流中包含信息符合当前虚拟机的要求
  - 准备
    - 为类变量分配内存并且设置默认初始值
    - 不包含final修饰的static，因为final在编译的时候就分配了
    - 不会为实例变量分配初始化，因为实例变量是随着对象的实例一起分配到堆中
  - 解析
    - 将常量池的符号引用转换为直接引用
    - 事实上，解析操作会半年随着JVM在执行完初始化之后再执行

- 初始化
  
  - 初始化阶段就是执行类构造器方法<clinit>()的过程
  - 如果类里面没有静态代码，那么<init>不会执行
  
  

### 加载器的关系

最顶层是引导类加载器，再下一层是扩展类加载器，再下一层是应用类加载器，我们平时自己写的自定义类就是应用类加载器来加载，引导类加载器是加载Java中核心类的，像String，就会被引导类加载器加载